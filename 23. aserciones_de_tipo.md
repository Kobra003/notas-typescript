# Aserciones de Tipo en TypeScript

## Introducci√≥n

Las **aserciones de tipo** en TypeScript permiten indicarle al compilador que tratamos un valor como un tipo espec√≠fico, aunque TypeScript no pueda inferirlo autom√°ticamente.

üìå **Usos principales de las aserciones de tipo**:  
‚úî Cuando estamos seguros del tipo de una variable, pero TypeScript no puede inferirlo correctamente.  
‚úî Cuando trabajamos con datos de una API o de fuentes externas con tipos desconocidos.  
‚úî Para manipular el DOM y acceder a elementos HTML con tipos m√°s espec√≠ficos.


## Sintaxis de Aserciones de Tipo

Hay dos formas de realizar una aserci√≥n de tipo en TypeScript:
### 1. Usando `as`

```typescript
let valor: unknown = "Hola, TypeScript";
let longitud: number = (valor as string).length;
console.log(longitud); // ‚úÖ 16
```

`as string` indica que `valor` es un `string`, por lo que podemos acceder a `.length`.

### 2. Usando `<>` (No recomendado en JSX)

```typescript
let valor: unknown = "Hola, TypeScript";
let longitud: number = (<string>valor).length;
console.log(longitud); // ‚úÖ 16
```

**Importante:** La sintaxis `<>` no debe usarse en archivos `.tsx` porque JSX usa `< >` para etiquetas HTML.


## Casos de Uso Comunes

### 1. Aserciones con Elementos del DOM

Cuando seleccionamos un elemento en el DOM, TypeScript lo considera de tipo `HTMLElement`. Si sabemos que es un `input`, podemos hacer una aserci√≥n de tipo.

```typescript
const input = document.getElementById("miInput") as HTMLInputElement;
input.value = "Nuevo valor";
```

Sin la aserci√≥n, TypeScript no permitir√≠a acceder a `.value`.

### 2. Aserciones con Datos Externos (JSON, APIs)

Cuando trabajamos con datos de una API o JSON sin tipado, podemos usar aserciones.

```typescript
const respuesta = '{ "nombre": "Juan", "edad": 30 }';
const datos = JSON.parse(respuesta) as { nombre: string; edad: number };
console.log(datos.nombre); // ‚úÖ "Juan"
```

**Precauci√≥n:** No valida si el JSON realmente tiene la estructura correcta.

### 3. Convertir `unknown` a un Tipo Espec√≠fico

Si una variable es `unknown`, debemos hacer una aserci√≥n antes de usarla.

```typescript
function procesarValor(valor: unknown) {
  if (typeof valor === "string") {
    console.log((valor as string).toUpperCase());
  }
}
procesarValor("hola"); // ‚úÖ "HOLA"
```

Evita errores al acceder a propiedades en valores desconocidos.

### 4. Evitar `any` con Aserciones

Si un valor es `any`, podemos forzar un tipo para evitar errores.

```typescript
let dato: any = "12345";
let numero: number = dato as number; // ‚ö† No convierte, solo indica el tipo
```

**Advertencia:** No convierte realmente el valor, solo enga√±a al compilador.


## **Doble Aserci√≥n (`unknown` primero)**

TypeScript no permite convertir entre tipos incompatibles sin usar `unknown`.

üö´ **No permitido:**

```typescript
let valor: string = "123";
let numero: number = valor as number; // ‚ùå Error
```

‚úÖ **Doble aserci√≥n usando `unknown`:**

```typescript
let valor: string = "123";
let numero: number = valor as unknown as number; // ‚úÖ Funciona
```

**√ösalo con precauci√≥n**: puede generar errores en tiempo de ejecuci√≥n.


## **Diferencias entre Aserciones y Conversi√≥n de Tipos**

Las aserciones **no convierten** valores, solo indican el tipo al compilador.

üö´ **No convierte el tipo realmente:**

```typescript
let valor: any = "123";
let numero: number = valor as number; // ‚ö† No convierte a n√∫mero
```

‚úÖ **Para convertir realmente, usa `Number()`**:

```typescript
let valor: any = "123";
let numero: number = Number(valor); // ‚úÖ Convierte a n√∫mero
```

**Regla general:** Si necesitas convertir, usa `Number()`, `String()`, `Boolean()`, etc.


## **Precauciones con las Aserciones**

‚úî **No abusar de ellas:** TypeScript pierde la capacidad de detectar errores.  
‚úî **Evitar `any` cuando sea posible:** Prefiere `unknown` y valida el tipo antes de hacer la aserci√≥n.  
‚úî **No usarlas para evitar errores:** Si TypeScript marca un error, es mejor corregirlo en lugar de forzar una aserci√≥n.