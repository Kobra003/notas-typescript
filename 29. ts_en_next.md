## **Introducci√≥n**

Next.js es un framework de React para aplicaciones web modernas que ofrece renderizado del lado del servidor (SSR), generaci√≥n de sitios est√°ticos (SSG) y m√°s caracter√≠sticas avanzadas. Integrar TypeScript en Next.js mejora la seguridad del c√≥digo, el autocompletado y la escalabilidad del proyecto.

**Beneficios de usar TypeScript con Next.js**:  
‚úî Tipado est√°tico para componentes, props y estados.  
‚úî Mejor autocompletado en los IDEs.  
‚úî Reducci√≥n de errores en tiempo de ejecuci√≥n.  
‚úî Soporte nativo en Next.js sin configuraci√≥n adicional.


## **1. Configuraci√≥n de Next.js con TypeScript**

### **1.1 Creaci√≥n de un nuevo proyecto**

```bash
npx create-next-app@latest my-next-app --typescript
cd my-next-app
```

Esto genera autom√°ticamente la configuraci√≥n necesaria para TypeScript.

Si ya tienes un proyecto de Next.js con JavaScript, puedes agregar TypeScript as√≠:

```bash
touch tsconfig.json
npm install --save-dev typescript @types/react @types/node
```

Al ejecutar Next.js (`npm run dev`), se detectar√° el archivo `tsconfig.json` y se configurar√° autom√°ticamente.


## **2. Estructura de un Proyecto con TypeScript**

```bash
üì¶ my-next-app
 ‚î£ üìÇ pages
 ‚îÉ ‚î£ üìú _app.tsx
 ‚îÉ ‚î£ üìú index.tsx
 ‚îÉ ‚î£ üìú about.tsx
 ‚îÉ ‚îó üìú api
 ‚îÉ   ‚îó üìú hello.ts
 ‚î£ üìÇ components
 ‚îÉ ‚îó üìú Header.tsx
 ‚î£ üìÇ styles
 ‚îÉ ‚îó üìú globals.css
 ‚î£ üìú tsconfig.json
 ‚îó üìú next.config.js
```

**Puntos clave**:
- `pages/` contiene las rutas de la aplicaci√≥n.
- `components/` almacena componentes reutilizables.
- `pages/api/` contiene las API Routes de Next.js.


## **3. Tipado en Componentes de Next.js**

### **3.1 Tipado de Props**

En Next.js, los componentes de React pueden usar `interface` o `type` para definir sus props.

```typescript
import React from "react";

interface ButtonProps {
  text: string;
  onClick: () => void;
}

const Button: React.FC<ButtonProps> = ({ text, onClick }) => {
  return <button onClick={onClick}>{text}</button>;
};

export default Button;
```

**Explicaci√≥n**:  
‚úî `text` debe ser un `string`.  
‚úî `onClick` es una funci√≥n sin argumentos que no retorna nada.

### **3.2 Tipado en `useState` y `useEffect`**

```typescript
import { useState, useEffect } from "react";

const Counter = () => {
  const [count, setCount] = useState<number>(0);

  useEffect(() => {
    console.log(`El contador ahora es: ${count}`);
  }, [count]);

  return (
    <div>
      <p>Contador: {count}</p>
      <button onClick={() => setCount(count + 1)}>Incrementar</button>
    </div>
  );
};

export default Counter;
```

**Explicaci√≥n**:  
‚úî `useState<number>(0)` asegura que `count` siempre sea un n√∫mero.  
‚úî `useEffect` reacciona a cambios en `count`.


## **4. Tipado en P√°ginas de Next.js**

Las p√°ginas en Next.js son componentes React. Podemos tiparlas usando `NextPage`.

### **4.1 P√°gina `index.tsx`**


```typescript
import { NextPage } from "next";

const Home: NextPage = () => {
  return <h1>Bienvenido a Next.js con TypeScript</h1>;
};

export default Home;
```

**`NextPage`** es un tipo que indica que el componente es una p√°gina de Next.js.


## **5. Uso de `getServerSideProps` y `getStaticProps` con TypeScript**

### **5.1 `getServerSideProps` (SSR - Renderizado en cada solicitud)**

```typescript
import { GetServerSideProps, NextPage } from "next";

interface Props {
  name: string;
}

const ServerPage: NextPage<Props> = ({ name }) => {
  return <h1>Hola, {name}</h1>;
};

export const getServerSideProps: GetServerSideProps<Props> = async () => {
  return {
    props: {
      name: "Usuario desde SSR",
    },
  };
};

export default ServerPage;
```

**`getServerSideProps`** se ejecuta en cada solicitud en el servidor.

### **5.2 `getStaticProps` (SSG - Generaci√≥n est√°tica en build time)**

```typescript
import { GetStaticProps, NextPage } from "next";

interface Props {
  time: string;
}

const StaticPage: NextPage<Props> = ({ time }) => {
  return <h1>P√°gina generada a las: {time}</h1>;
};

export const getStaticProps: GetStaticProps<Props> = async () => {
  return {
    props: {
      time: new Date().toISOString(),
    },
    revalidate: 10, // Regeneraci√≥n cada 10s
  };
};

export default StaticPage;
```

**`getStaticProps`** permite generar p√°ginas en el build y regenerarlas cada cierto tiempo (`revalidate`).


## **6. API Routes en Next.js con TypeScript**

### **6.1 Creaci√≥n de una API Route**

Las API Routes est√°n en `pages/api/` y act√∫an como funciones backend.

```typescript
import { NextApiRequest, NextApiResponse } from "next";

export default function handler(req: NextApiRequest, res: NextApiResponse) {
  res.status(200).json({ message: "Hola desde una API con TypeScript" });
}
```

**`NextApiRequest` y `NextApiResponse`** tipan correctamente las solicitudes y respuestas.


## **7. Tipado de Fetching de Datos con SWR**

SWR es una librer√≠a para manejar fetching de datos de forma optimizada en React y Next.js.

### **7.1 Instalar SWR**

```bash
npm install swr
```

### **7.2 Uso con TypeScript**

```typescript
import useSWR from "swr";

interface User {
  id: number;
  name: string;
}

const fetcher = (url: string) => fetch(url).then(res => res.json());

const UserProfile = () => {
  const { data, error } = useSWR<User>("/api/user", fetcher);

  if (error) return <p>Error al cargar el usuario</p>;
  if (!data) return <p>Cargando...</p>;

  return <h1>Hola, {data.name}</h1>;
};

export default UserProfile;
```

**Ventajas de SWR**:  
‚úî Reactivo y r√°pido.  
‚úî Soporte para revalidaci√≥n autom√°tica.  
‚úî Tipado seguro con TypeScript.


